MOV R1, SP
MOV R2, 5
SUB R1, R2
MOV R2, "Write"
MOV R1, [R1]
EQ R1, R2
JZ R1, 62
MOV R1, SP
MOV R2, 4
SUB R1, R2
MOV R2, [R1]
ADD R1, 1
MOV R3, [R1]
ADD R1, 1
MOV R4, [R1]
MOV R5, 5
PUSH R5
PUSH R2
PUSH R3
PUSH R4
PUSH R5
INT 5
POP R1
POP R2
POP R2
POP R2
POP R2
MOV R2, SP
MOV R3, 1
SUB R2, R3
MOV [R2], R1
MOV R1, SP
MOV R2, 5
SUB R1, R2
MOV R2, "Read"
MOV R1, [R1]
EQ R1, R2
JZ R1, 124
MOV R1, SP
MOV R2, 4
SUB R1, R2
MOV R2, [R1]
ADD R1, 1
MOV R3, [R1]
ADD R1, 1
MOV R4, [R1]
MOV R5, 7
PUSH R5
PUSH R2
PUSH R3
PUSH R4
PUSH R5
INT 6
POP R1
POP R2
POP R2
POP R2
POP R2
MOV R2, SP
MOV R3, 1
SUB R2, R3
MOV [R2], R1
MOV R1, SP
MOV R2, 1
SUB R1, R2
MOV R2, "Exit"
MOV R1, [R1]
EQ R1, R2
JZ R1, 146
MOV R1, 10
PUSH R1
INT 10
RET
MOV R1, SP
MOV R2, 1
SUB R1, R2
MOV R2, "Init"
MOV R1, [R1]
EQ R1, R2
JZ R1, 180
MOV R3, 1032
MOV R1, 1024
MOV R2, 2040
MOV [R1],R3
ADD R1, 8
ADD R3, 8
EQ R2, R1
JZ R2, 164
MOV [R1], -1
RET
MOV R1, SP
MOV R2, 1
SUB R1, R2
MOV R1,[R1]
MOV R2, "Alloc"
EQ R1, R2
JZ R1, 214
MOV R1, [1024]
MOV R2, -1
EQ R2, R1
JZ R2, 202
MOV [1024], [R1]
MOV R2, SP
MOV R3, 1
SUB R2, R3
MOV [R2], R1
RET
MOV R1, SP
MOV R2, 1
SUB R1, R2
MOV R2, "Free"
EQ R1, R2
JZ R1, 246
MOV R1, SP
MOV R2, 2
SUB R1, R2
MOV R2, [R1]
MOV [R2],[1024]
MOV [1024], R2
MOV R2, SP
MOV R3, 2
SUB R2, R3
MOV [R2], "NULL"
RET
